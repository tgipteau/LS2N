{% load static %}
{% include "simulation/includes/banner.html" %}


<div class="container">

    <article>
    <div class="entry-content">

                        <h3>Experiment logging scenarios on a virtual tropical forest</h3>

                        <hr/>


                        <p>
                            Imagine a tropical forest.
                        </p>

                        <p>
                            Assume you must manage in a sustainable way the exploitation of this forest.<br/>
                            We propose to divide this virtual forest into 9 plots.
                        </p>

                        <p>
                            Here you can test logging scenarios on this virtual tropical forest.<br/>
                            With this basic web app, you can experiment the impact of your logging scenario on the dynamics of the forest.
                        </p>

                        <p>
                            The logging scenario admits four parameters: $I$, $F$, $D$, $\delta$.
                            <ul>
                              <li>$I$ represents the intensity of the logging, that is, the percentage of trees that are cut down on each forest plot.</li>
                              <li>$F$ represents the time interval between two logging phases.</li>
                              <li>$D$ represents the total time of the logging scenario.</li>
                              <li>$\delta$ represents the increase of trees mortality, due to climate change.</li>
                            </ul>
                        </p>

                        <p>
                            If you don't know which numbers to enter, you can begin with the following example:<br/>
                            <ul>
                              <li>$I = 0.1$ ($10$% of logging),</li>
                              <li>$F = 20$ years (every $20$ years),</li>
                              <li>$D = 150$ years (during $150$ years),</li>
                              <li>$\delta = 0.05$ (with a $5$% increased mortality).</li>
                            </ul>
                        </p>

    </div>

    <hr/>

    <div id="simulationzone">
        <h3>Simulation</h3>
    </div>

    <div class="well"> <!-- Simulation zone -->
    <form action="#simulationzone" method="post" class="form-inline">
    {% csrf_token %}
    <div class="form-group has-success">
    <span class="math">\(I = \)</span><input type="text" name="I" size="3" maxlength="6" class="form-control"/> Intensity of the logging (between 0 and 0.5).<br/>
    <span class="math">\(F = \)</span><input type="text" name="F" size="3" maxlength="6" class="form-control"/> Time interval between two logging phases (between 5 and 50 years).<br/>
    <span class="math">\(D = \)</span><input type="text" name="D" size="3" maxlength="6" class="form-control"/> Total time of the logging (between 100 and 200 years).<br/>
    <span class="math">\(\delta = \)</span><input type="text" name="delta" size="3" maxlength="6" class="form-control"/> Evolution of the mortality (between -0.1 and 0.1).<br/><br/>
    {% if simu %}
        <span class="text-info"><em>{{ result }}</em></span><br/><br/>
    {% else %}
        <span class="text-danger"><em>{{ result }}</em></span><br/><br/>
    {% endif %}
    <input type="submit" value="Simulation" class="btn btn-success btn-sm" onclick="myFunction()">
    <button type="button" class="btn btn-default btn-sm" data-toggle="modal" data-target="#myModal">Help</button><br/><br/>
    <em><h2 class="text-danger" id="demo"></h2></em>
    </div>


    <script>
    function myFunction() {
        text = "Computing and loading... Please wait...";
        document.getElementById('demo').innerHTML = text;
        }
    </script>

       <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
       <div class="modal-dialog" role="document">
       <div class="modal-content">
       <div class="modal-header">
       <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
       <h4 class="modal-title" id="myModalLabel">Simulation</h4>
       </div>
       <div class="modal-body">
       To make your own simulation, you just have to enter decimal numbers for the parameters.
       For instance, <span class="math">\(I = 0.45\)</span>,
       <span class="math">\(F = 35\)</span>,
       <span class="math">\(D = 150\)</span>
       and <span class="math">\(\delta = 0.04\)</span>.
       Then, click on <em>Simulation</em> button.<br/>
       You can make as many simulations as you want.
       </div>
       <div class="modal-footer">
       <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">OK</button>
       </div>
       </div>
       </div>
       </div>

    </form>

    </div><!-- End simulation zone -->
    {% if simu %}

    <div class="panel panel-primary">
      <div class="panel-heading">
        <h3 class="panel-title">Results of the simulation</h3>
      </div>
      <div class="panel-body">
        <p>
            The parameters you have chosen are:<br/>
            $I = {{ I }}$,<br/>
            $F = {{ F }}$ years,<br/>
            $D = {{ D }}$ years,<br/>
            $\delta = {{ delta }}$.
        </p>

        <hr/>

            {% if dying and notdying %}
                <p>
                    The distribution of resilient plots and dying plots is shown on the following donut chart.
                </p>
                <p align="center">
                    <img src="https://velo.pythonanywhere.com/static/simulation/images/logging2.svg?={{ mycache }}" width="65%" align="center"/>
                </p>

            {% else %}
                {% if notdying %}
                <h4 class="text-success">
                    All the forest plots resist to the logging!
                </h4>
                {% else %}
                <h4 class="text-danger">
                    All the forest plots are killed by the logging... Maybe you should experiment a lower intensity of logging...
                </h4>
                {% endif %}
            {% endif %}

                <p>
                        <table class="table table-striped table-hover ">
                            <thead>
                                <tr class="success">
                                    <th>Forest plot</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                            {% for plot in dying_plots %}
                            <tr class="active">
                                <td> {{ plot }} </td>
                                <td> dying </td>
                            </tr>
                            {% endfor %}
                            {% for plot in notdying_plots %}
                            <tr class="active">
                                <td> {{ plot }} </td>
                                <td> resilient </td>
                            </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                </p>

        <p>
            The time series corresponding to your logging scenario are given below.
            On the left, the densities of trees with respect to time are shown for all the forest plots.
            On the right, the results are shown separately for each forest plot.
        </p>

        <p align="center">
        <img src="https://velo.pythonanywhere.com/static/simulation/images/logging.svg?={{ mycache }}" width="95%" align="center"/>
        </p>
          </div>
    </div>
    {% endif %}

    <hr/>


        <p align=center>
            <a href="http://www.ecofog.gf/" target="_blank"><img src="https://velo.pythonanywhere.com/static/simulation/images/ecofog.png" width="10%" align="center"/></a>
            <a href="https://www.ls2n.fr/" target="_blank"><img src="https://velo.pythonanywhere.com/static/simulation/images/ls2n.png" width="17%" align="center"/></a>
        </p>

    </article>

</div> <!-- class="container" -->

{% include "simulation/includes/footer.html" %}